function pseRequiredElement(e,t){t?($("#"+e).parents(".form-group").addClass("has-danger"),$("#"+e).parents(".form-group").find(".form-text").show()):($("#"+e).parents(".form-group").removeClass("has-danger"),$("#"+e).parents(".form-group").find(".form-text").hide())}function checkRequiredElements(){var e=!0,t=document.getElementById("PSEAccountType").value,n=document.getElementById("PSEBankCode").value,r=document.getElementById("PSEIdentityDocumentType").value,o=document.getElementById("PSEIdentityDocumentNumber").value;return"-1"==t?(e=!1,pseRequiredElement("PSEAccountType",!0)):pseRequiredElement("PSEAccountType",!1),"-1"==n||"0"==n?(e=!1,pseRequiredElement("PSEBankCode",!0)):pseRequiredElement("PSEBankCode",!1),""==r?(e=!1,pseRequiredElement("PSEIdentityDocumentType",!0)):pseRequiredElement("PSEIdentityDocumentType",!1),""==o?(e=!1,pseRequiredElement("PSEIdentityDocumentNumber",!0)):pseRequiredElement("PSEIdentityDocumentNumber",!1),e?hideAlert():showValidationAlert(),e}function CreatePseTransaction(){if(checkRequiredElements()){$("#pseButton").prop("disabled",!0);var e=$("#pseButton").text();$("#pseButton").text("Redireccionado...");var t=document.getElementById("PSEAccountType").value,n=document.getElementById("PSEBankCode").value,r=document.getElementById("PSEIdentityDocumentType").value,o=document.getElementById("PSEIdentityDocumentNumber").value,u=JSON.parse(document.getElementById("thirdPartyCheckoutsInformation").value),a={MasterLocatorId:document.getElementById("masterLocatorId").value,Amount:document.getElementById("pendingToPay").value,PaymentProcessOptionType:u.PSE.PaymentProcessOptionType,Provider:u.PSE.Provider,SiteReturnUrl:u.PSE.SiteReturn,SpecificProviderDetails:JSON.stringify({AccountType:t,BankCode:n,IdentityDocumentType:r,IdentityDocumentNumber:o,CompanyPhoneNumber:"(00) 0000-0000"})};jQuery.ajax({type:"POST",url:"/CreateThirdPartyCheckoutTransaction",data:JSON.stringify(a),dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){0==t.ResponseCode?""!=t.ProviderUrl?(hideAlert(),psePayIEventLog(),window.location.href=t.ProviderUrl):($("#pseButton").text(e),$("#pseButton").prop("disabled",!1),showMessageAlert(document.getElementById("thirdPartyCheckoutGenericErrorMessage").value)):($("#pseButton").text(e),$("#pseButton").prop("disabled",!1),showMessageAlert(t.ResponseMessage))},error:function(t){$("#pseButton").text(e),$("#pseButton").prop("disabled",!1),showMessageAlert(document.getElementById("thirdPartyCheckoutGenericErrorMessage").value)}})}}function SetPassengerDocumentNumber(){$("#PSEIdentityDocumentNumberOptional").is(":checked")?($("#PSEIdentityDocumentNumber").val($("#principalDocNum").val()),$("#PSEIdentityDocumentNumber").prop("disabled",!0)):($("#PSEIdentityDocumentNumber").val(""),$("#PSEIdentityDocumentNumber").prop("disabled",!1))}jQuery("#pseButton").on("click",function(e){CreatePseTransaction()});